# Boilerplate gulp

Wires up these technologies to [gulp](http://gulpjs.com/):
* [browserify](http://browserify.org/) - Bundles CommonJS modules for use in 
browsers
* [less](http://lesscss.org/) - CSS preprocessor
* [uglify](https://github.com/mishoo/UglifyJS2/) - JavaScript minifier
* [csso](https://github.com/css/csso) - CSS minifier
* [jshint](http://www.jshint.com/) - JavaScript linter
* [recess](http://twitter.github.io/recess/) - CSS linter
* [jasmine](http://jasmine.github.io/2.0/introduction.html) - JavaScript testing 
framework
* [phantomjs](http://phantomjs.org/) - Headless browser (to run tests in)
* [istanbul](https://github.com/gotwarlost/istanbul) - JavaScript test coverage
analysis tool
* [js beautifier](https://github.com/beautify-web/js-beautify) - JavaScript
reformatter
* [plato](https://github.com/es-analysis/plato) - Complexity and maintainability
analysis for JavaScript source code
* [connect](http://www.senchalabs.org/connect/) - HTTP server for development 
use
* [livereload](http://livereload.com/) - Automatic reloading of browsers which
are connected to the development server

This module assigns common tasks to gulp for managing client-side modules. The
tasks cover these common use cases: incremental builds, LESS processor, CommonJS
bundler, minifications, source maps, development server with auto reloading, 
CSS and JavaScript linting, cross-browser unit testing, test coverage reporting,
maintainability reporting and style fixer.

By default the tasks enforce some opinion on code structure, but it's 
configurable. This helper is intended for client-side modules with a single
JavaScript and/or CSS artifact.

To see it in action see [client-side-seed](https://github.com/oztu/client-side-seed).

# Tasks
```sh
# Creates a clean, full build with testing, linting, reporting and
# minification then copies the results to the dist folder.
gulp # alias for gulp dist

# Incrementally build JavaScript and CSS files as they're modified and then
# execute testing and linting tasks. Also starts a server on port 3000
# which serves both the example and build directories. If either has files which
# change, connected browsers will automatically refresh.
gulp dev

# Run unit tests once via Jasmine and generate a test and coverage reports in
# ./report
gulp test

# Generate test coverage report (also generated by running gulp test) along
# with Plato report for JavaScript code maintainability.
gulp report

# Runs the JavaScript sources files through JSHint according to the options
# set in jsHintConfig, and the CSS source files through Recess according to
# the options set in recessConfig.
gulp lint

# *REWRITES* the JavaScript files by passing them through JS Beautifier with
# the options set by jsBeautifierConfig.
gulp fix-style

```

# Use
Install by executing `npm install --save-dev boilerplate-gulp`. Then modify
your `gulpfile.js` (or create one):

```javascript
var gulp = require('gulp'), 
  boilerplate = require('boilerplate-gulp');

boilerplate(gulp, {
  pkg: require('./package.json'),

  // The following are optional
  disableCss: false, // Disables all CSS build paths for JS-only projects
  jsMain: pkg.main, // Entry point for browserify
  cssMain: 'src/css/[PACKAGE_NAME].less', // Entry point for LESS
  connectConfig: {}, // passed into gulp-connect's connect.server()
  jsHintConfig: {}, // passed to gulp-jshint's jshint()
  jsBeautifierConfig: {}, // passed to js-beautify's beautify()
  recessConfig: {} // passed to gulp-recess's recess()
});

// Rest of your gulp file, potentially overwriting the boilerplate tasks...
```

# Default Filesystem Structure

* dist/ - The distributable files for this package, updated when `gulp` is run
* build/ - The build directory used by gulp during builds.
* dev/ - Development related files (such as custom tasks or configuration).
* example/ - The root directory served during `gulp dev`.
* src/js/ - CommonJS modules which describe the JS source of the package.
* src/js/[PACKAGE_NAME].js - Entry-point for browserify.
* src/css/ - LESS files which describe the CSS source of the package.
* src/css/[PACKAGE_NAME].less - Entry-point for less.
* reports/ - Reports generated about the source code.
* reports/coverage - Test coverage reporting.
* reports/plato - Complexity and maintainability reporting.

All of these directories are configurable via your package.json's directory
parameter, like so:
```javascript
{
...
  "directories": {
    "dist": "dist",
    "build": "build",
    "dev": "dev",
    "example": "example",
    "jsSrc": "src/js/",
    "cssSrc": "src/css",
    "reports": "reports"
  }
...
}
```
